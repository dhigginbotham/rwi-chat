{
  "name": "yar",
  "description": "Cookie jar plugin",
  "version": "0.1.2",
  "author": {
    "name": "Eran Hammer",
    "email": "eran@hueniverse.com",
    "url": "http://hueniverse.com"
  },
  "contributors": [
    {
      "name": "Van Nguyen",
      "email": "thegoleffect@gmail.com"
    }
  ],
  "repository": {
    "type": "git",
    "url": "git://github.com/spumko/yar"
  },
  "main": "index",
  "keywords": [
    "hapi",
    "plugin",
    "cookies",
    "jar",
    "session"
  ],
  "engines": {
    "node": "0.8.x"
  },
  "dependencies": {
    "hoek": "0.6.x",
    "node-uuid": "1.4.x"
  },
  "peerDependencies": {
    "hapi": "0.15.x"
  },
  "devDependencies": {
    "hapi": "0.15.x",
    "mocha": "1.x.x",
    "chai": "1.x.x",
    "blanket": "1.0.x",
    "travis-cov": "0.2.x"
  },
  "scripts": {
    "test": "make test && make test-cov",
    "blanket": {
      "pattern": "//^((?!/node_modules/)(?!/test/).)*$/ig",
      "onlyCwd": true,
      "data-cover-flags": {
        "branchTracking": true
      }
    },
    "travis-cov": {
      "threshold": 100
    }
  },
  "licenses": [
    {
      "type": "BSD",
      "url": "http://github.com/spumko/yar/raw/master/LICENSE"
    }
  ],
  "readme": "<a href=\"https://github.com/spumko\"><img src=\"https://raw.github.com/spumko/spumko/master/images/from.png\" align=\"right\" /></a>\n![yar Logo](https://raw.github.com/spumko/yar/master/images/yar.png)\n\nA [**hapi**](https://github.com/spumko/hapi) cookie jar\n\n[![Build Status](https://secure.travis-ci.org/spumko/yar.png)](http://travis-ci.org/spumko/yar)\n\n\n## Install\n\n    $ npm install yar\n\n\n\n## Usage\n\nThe ***yar*** plugin adds a simple way to set a persistant state (using an [Iron](https://github.com/hueniverse/iron) encrypted cookie) across requests.\nIt has support for session management - either stored on the client via cookie, in server memory, or using an external database (via custom storage code).\n\nFor example, the first handler sets the jar content and the second utilizes it:\n```javascript\nvar handler1 = function () {\n\n    this.plugins.yar = {\n        key: 'value'\n    };\n\n    return this.reply();\n};\n\nvar handler2 = function () {\n\n    this.reply(this.state.yar.key);     // Will send back 'value'\n};\n```\n\nThe plugin requires a password for encryption, and the `ext` permission:\n```javascript\nvar options = {\n    permissions: {\n        ext: true                   // Required\n    },\n    plugin: {\n        name: 'yar' ,               // Optional, overrides cookie name. Defaults to 'yar'. Doesn't affect 'plugins.yar'.\n        isSingleUse: false,         // Optional, clears jar after one request. Defaults to false.\n        cookieOptions: {\n            password: 'password',   // Required\n            isSecure: true          // Optional, any supported cookie options except `encoding`\n        }\n    }\n};\n\nvar server = new Hapi.Server();\n\nserver.plugin().require('yar', options, function (err) { });\n```\n\n\n## API Reference\n\n### Options\n\n- `name` - determines what name to use for the cookie and module references. Defaults to _yar_. Should not have to modify this unless it conflicts with another plugin named yar.\n- `isSingleUse` - determines whether the cookie should be deleted on next request. Defaults to _false_.\n- `cookieOptions` - the configuration for cookie-specific features\n    - `password` - (Required) used to hash and secure the cookie data\n    - `path` - determines the cookie path. Defaults to _'/'_.\n    - `isSecure` - determines whether or not to transfer using TLS/SSL. Defaults to _false_.\n- `session` - determines whether to enable the more robust session features (any non false-y values will enable it). Defaults to _false_.\n    - `key` - determines how to access the `request.session` object. Defaults to _'session'_.\n    - `sidKey` - determines what key to use for storing session id in session object. Defaults to _'sid'_.\n    - `startKey` - determines what key to use for storing server start time in session object (used for identifying stale cookies). Defaults to _'sst'_.\n    - `maxLen` - determines the maximum string length allowed in a cookie before falling back to MemoryStore\n    - `store` - setting this to an MemoryStore compatible interface will allow session data to be stored externally. Defaults to _null_.\n    \n\n### Sessions\n\nMore robust session support is included in yar but it is not enabled by default. To enable, simple set the plugin option session to true:\n\n```javascript\nvar options = {\n    \"cookieOptions\": {\n        \"password\": \"worldofwalmart\"\n    },\n    \"session\": true\n};\n```\n\n\n#### Methods\n\nThis will enable several request-level methods and parameters:\n\n* request.session\n* request.flash\n\n##### request.session\n\nSession support will enable the `request.session` object. Modifications to this object will persist between requests for a given user. The objects are not shared between users. The objects are stored entirely within the user cookie **UNLESS** the size exceeds `session.maxLen` - at which point, they will be stored on the server in RAM.\n\n**Basic example**\n\n```javascript\nserver.addRoute({\n    method: 'GET',\n    path: '/',\n    config: {\n        handler: function (request) {\n\n            if (!request.session.loggedIn) {\n                request.session.loggedIn = true; // logging you in\n                request.reply.redirect('/').send();\n            }\n            else {\n                request.reply(\"You are logged in\");\n            }\n        }\n    }\n});\n```\n\n##### request.flash(type, message)\n\nSession support will also enable the `flash` function. The flash function is used to store volatile data - data that should be deleted once read.\n\nWhen given no arguments, it will return all of the flash messages and delete the originals.\n\nWhen given only a type, it will return all of the flash messages of that type and delete the originals.\n\nWhen given a type and a message, it will set or append that message to the given type.",
  "readmeFilename": "README.md",
  "_id": "yar@0.1.2",
  "dist": {
    "shasum": "60c45274638094f81931dea2c98b4b198436d6d3"
  },
  "_from": "yar@>= 0.0.5",
  "_resolved": "https://registry.npmjs.org/yar/-/yar-0.1.2.tgz"
}
